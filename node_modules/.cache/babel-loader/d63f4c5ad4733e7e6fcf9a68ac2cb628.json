{"ast":null,"code":"var _jsxFileName = \"/Users/yusukenakano/Documents/unchain/dApp-starter-project/src/App.js\";\n// App.js\nimport React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\n/* ethers 変数を使えるようにする*/\n\nimport { ethers } from \"ethers\";\n/* ABIファイルを含むWavePortal.jsonファイルをインポートする*/\n\nimport abi from \"./utils/WavePortal.json\";\n\nconst App = () => {\n  /* ユーザーのパブリックウォレットを保存するために使用する状態変数を定義します */\n  const [currentAccount, setCurrentAccount] = useState(\"\");\n  console.log(\"currentAccount: \", currentAccount);\n  /**\n  * デプロイされたコントラクトのアドレスを保持する変数を作成\n  */\n\n  const contractAddress = \"0x04da168454AFA19Eb43D6A28b63964D8DCE8351e\";\n  /**\n  * ABIの内容を参照する変数を作成\n  */\n\n  const contractABI = abi.abi;\n  /*\n  * window.ethereumにアクセスできることを確認します。\n  */\n\n  const getAllWaves = async () => {\n    const {\n      ethereum\n    } = window;\n\n    try {\n      if (ethereum) {\n        const provider = new ethers.providers.Web3Provider(ethereum);\n        const signer = provider.getSigner();\n        const wavePortalContract = new ethers.Contract(contractAddress, contractABI, signer);\n        /* コントラクトからgetAllWavesメソッドを呼び出す */\n\n        const waves = await wavePortalContract.getAllWaves();\n        /* UIに必要なのは、アドレス、タイムスタンプ、メッセージだけなので、以下のように設定 */\n\n        const wavesCleaned = waves.map(wave => {\n          return {\n            address: wave.waver,\n            timestamp: new Date(wave.timestamp * 1000),\n            message: wave.message\n          };\n        });\n        /* React Stateにデータを格納する */\n\n        setAllWaves(wavesCleaned);\n      } else {\n        console.log(\"Ethereum object doesn't exist!\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  /**\n   * `emit`されたイベントに反応する\n   */\n\n\n  useEffect(() => {\n    let wavePortalContract;\n\n    const onNewWave = (from, timestamp, message) => {\n      console.log(\"NewWave\", from, timestamp, message);\n      setAllWaves(prevState => [...prevState, {\n        address: from,\n        timestamp: new Date(timestamp * 1000),\n        message: message\n      }]);\n    };\n    /* NewWaveイベントがコントラクトから発信されたときに、情報をを受け取ります */\n\n\n    if (window.ethereum) {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n      wavePortalContract = new ethers.Contract(contractAddress, contractABI, signer);\n      wavePortalContract.on(\"NewWave\", onNewWave);\n    }\n    /*メモリリークを防ぐために、NewWaveのイベントを解除します*/\n\n\n    return () => {\n      if (wavePortalContract) {\n        wavePortalContract.off(\"NewWave\", onNewWave);\n      }\n    };\n  }, []);\n\n  const checkIfWalletIsConnected = async () => {\n    try {\n      const {\n        ethereum\n      } = window;\n\n      if (!ethereum) {\n        console.log(\"Make sure you have metamask!\");\n        return;\n      } else {\n        console.log(\"We have the ethereum object\", ethereum);\n      }\n      /* ユーザーのウォレットへのアクセスが許可されているかどうかを確認します */\n\n\n      const accounts = await ethereum.request({\n        method: \"eth_accounts\"\n      });\n\n      if (accounts.length !== 0) {\n        const account = accounts[0];\n        console.log(\"Found an authorized account:\", account);\n        setCurrentAccount(account);\n      } else {\n        console.log(\"No authorized account found\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }; // connectWalletメソッドを実装\n\n\n  const connectWallet = async () => {\n    try {\n      const {\n        ethereum\n      } = window;\n\n      if (!ethereum) {\n        alert(\"Get MetaMask!\");\n        return;\n      }\n\n      const accounts = await ethereum.request({\n        method: \"eth_requestAccounts\"\n      });\n      console.log(\"Connected: \", accounts[0]);\n      setCurrentAccount(accounts[0]);\n    } catch (error) {\n      console.log(error);\n    }\n  }; // waveの回数をカウントする関数を実装\n\n\n  const wave = async () => {\n    try {\n      const {\n        ethereum\n      } = window;\n\n      if (ethereum) {\n        const provider = new ethers.providers.Web3Provider(ethereum);\n        const signer = provider.getSigner();\n        /*\n        * ABIを参照\n        */\n\n        const wavePortalContract = new ethers.Contract(contractAddress, contractABI, signer);\n        let count = await wavePortalContract.getTotalWaves();\n        console.log(\"Retrieved total wave count...\", count.toNumber());\n        /*\n        * コントラクトに👋（wave）を書き込む。\n        */\n\n        const waveTxn = await wavePortalContract.wave();\n        console.log(\"Mining...\", waveTxn.hash);\n        await waveTxn.wait();\n        console.log(\"Mined -- \", waveTxn.hash);\n        count = await wavePortalContract.getTotalWaves();\n        console.log(\"Retrieved total wave count...\", count.toNumber());\n      } else {\n        console.log(\"Ethereum object doesn't exist!\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  /* WEBページがロードされたときに下記の関数を実行します */\n\n\n  useEffect(() => {\n    checkIfWalletIsConnected();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dataContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"hand-wave\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 9\n    }\n  }, \"\\uD83D\\uDC4B\"), \" WELCOME!\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, \"\\u30A4\\u30FC\\u30B5\\u30EA\\u30A2\\u30E0\\u30A6\\u30A9\\u30EC\\u30C3\\u30C8\\u3092\\u63A5\\u7D9A\\u3057\\u3066\\u3001\\u300C\", /*#__PURE__*/React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"hand-wave\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 29\n    }\n  }, \"\\uD83D\\uDC4B\"), \"(wave)\\u300D\\u3092\\u9001\\u3063\\u3066\\u304F\\u3060\\u3055\\u3044\", /*#__PURE__*/React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"shine\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 93\n    }\n  }, \"\\u2728\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"waveButton\",\n    onClick: wave,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, \"Wave at Me\"), !currentAccount && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"waveButton\",\n    onClick: connectWallet,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }\n  }, \"Connect Wallet\"), currentAccount && /*#__PURE__*/React.createElement(\"button\", {\n    className: \"waveButton\",\n    onClick: connectWallet,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 9\n    }\n  }, \"Wallet Connected\")));\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/yusukenakano/Documents/unchain/dApp-starter-project/src/App.js"],"names":["React","useEffect","useState","ethers","abi","App","currentAccount","setCurrentAccount","console","log","contractAddress","contractABI","getAllWaves","ethereum","window","provider","providers","Web3Provider","signer","getSigner","wavePortalContract","Contract","waves","wavesCleaned","map","wave","address","waver","timestamp","Date","message","setAllWaves","error","onNewWave","from","prevState","on","off","checkIfWalletIsConnected","accounts","request","method","length","account","connectWallet","alert","count","getTotalWaves","toNumber","waveTxn","hash","wait"],"mappings":"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","sourcesContent":["// App.js\nimport React, { useEffect, useState } from \"react\";\nimport \"./App.css\";\n/* ethers 変数を使えるようにする*/\nimport { ethers } from \"ethers\";\n/* ABIファイルを含むWavePortal.jsonファイルをインポートする*/\nimport abi from \"./utils/WavePortal.json\";\nconst App = () => {\n  /* ユーザーのパブリックウォレットを保存するために使用する状態変数を定義します */\n  const [currentAccount, setCurrentAccount] = useState(\"\");\n  console.log(\"currentAccount: \", currentAccount);\n  /**\n * デプロイされたコントラクトのアドレスを保持する変数を作成\n */\n  const contractAddress = \"0x04da168454AFA19Eb43D6A28b63964D8DCE8351e\";\n  /**\n  * ABIの内容を参照する変数を作成\n  */\n   const contractABI = abi.abi;\n   /*\n  * window.ethereumにアクセスできることを確認します。\n  */\n   const getAllWaves = async () => {\n    const { ethereum } = window;\n\n    try {\n      if (ethereum) {\n      const provider = new ethers.providers.Web3Provider(ethereum);\n      const signer = provider.getSigner();\n      const wavePortalContract = new ethers.Contract(contractAddress, contractABI, signer);\n      /* コントラクトからgetAllWavesメソッドを呼び出す */\n      const waves = await wavePortalContract.getAllWaves();\n      /* UIに必要なのは、アドレス、タイムスタンプ、メッセージだけなので、以下のように設定 */\n      const wavesCleaned = waves.map(wave => {\n        return {\n        address: wave.waver,\n        timestamp: new Date(wave.timestamp * 1000),\n        message: wave.message,\n        };\n      });\n\n      /* React Stateにデータを格納する */\n      setAllWaves(wavesCleaned);\n      } else {\n      console.log(\"Ethereum object doesn't exist!\");\n      }\n    } catch (error) {\n      console.log(error);\n    }\n    };\n\n    /**\n     * `emit`されたイベントに反応する\n     */\n    useEffect(() => {\n    let wavePortalContract;\n\n    const onNewWave = (from, timestamp, message) => {\n      console.log(\"NewWave\", from, timestamp, message);\n      setAllWaves(prevState => [\n      ...prevState,\n      {\n        address: from,\n        timestamp: new Date(timestamp * 1000),\n        message: message,\n      },\n      ]);\n    };\n\n    /* NewWaveイベントがコントラクトから発信されたときに、情報をを受け取ります */\n    if (window.ethereum) {\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\n      const signer = provider.getSigner();\n\n      wavePortalContract = new ethers.Contract(contractAddress, contractABI, signer);\n      wavePortalContract.on(\"NewWave\", onNewWave);\n    }\n    /*メモリリークを防ぐために、NewWaveのイベントを解除します*/\n    return () => {\n      if (wavePortalContract) {\n      wavePortalContract.off(\"NewWave\", onNewWave);\n      }\n    };\n    }, []);\n  const checkIfWalletIsConnected = async () => {\n    try {\n      const { ethereum } = window;\n      if (!ethereum) {\n        console.log(\"Make sure you have metamask!\");\n        return;\n      } else {\n        console.log(\"We have the ethereum object\", ethereum);\n      }\n      /* ユーザーのウォレットへのアクセスが許可されているかどうかを確認します */\n      const accounts = await ethereum.request({ method: \"eth_accounts\" });\n      if (accounts.length !== 0) {\n        const account = accounts[0];\n        console.log(\"Found an authorized account:\", account);\n        setCurrentAccount(account)\n      } else {\n        console.log(\"No authorized account found\")\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n// connectWalletメソッドを実装\nconst connectWallet = async () => {\n  try {\n    const { ethereum } = window;\n    if (!ethereum) {\n      alert(\"Get MetaMask!\");\n      return;\n    }\n    const accounts = await ethereum.request({ method: \"eth_requestAccounts\" });\n    console.log(\"Connected: \", accounts[0]);\n    setCurrentAccount(accounts[0]);\n  } catch (error) {\n    console.log(error)\n  }\n}\n// waveの回数をカウントする関数を実装\nconst wave = async () => {\n  try {\n    const { ethereum } = window;\n    if (ethereum) {\n      const provider = new ethers.providers.Web3Provider(ethereum);\n      const signer = provider.getSigner();\n      /*\n      * ABIを参照\n      */\n      const wavePortalContract = new ethers.Contract(contractAddress, contractABI, signer);\n      let count = await wavePortalContract.getTotalWaves();\n      console.log(\"Retrieved total wave count...\", count.toNumber());\n      /*\n      * コントラクトに👋（wave）を書き込む。\n      */\n      const waveTxn = await wavePortalContract.wave();\n      console.log(\"Mining...\", waveTxn.hash);\n      await waveTxn.wait();\n      console.log(\"Mined -- \", waveTxn.hash);\n      count = await wavePortalContract.getTotalWaves();\n      console.log(\"Retrieved total wave count...\", count.toNumber());\n    } else {\n      console.log(\"Ethereum object doesn't exist!\");\n    }\n  } catch (error) {\n    console.log(error)\n  }\n}\n  /* WEBページがロードされたときに下記の関数を実行します */\n  useEffect(() => {\n    checkIfWalletIsConnected();\n  }, [])\n  return (\n    <div className=\"mainContainer\">\n      <div className=\"dataContainer\">\n        <div className=\"header\">\n        <span role=\"img\" aria-label=\"hand-wave\">👋</span> WELCOME!\n        </div>\n        <div className=\"bio\">\n          イーサリアムウォレットを接続して、「<span role=\"img\" aria-label=\"hand-wave\">👋</span>(wave)」を送ってください<span role=\"img\" aria-label=\"shine\">✨</span>\n        </div>\n        {/* waveボタンにwave関数を連動させる。*/}\n        <button className=\"waveButton\" onClick={wave}>\n          Wave at Me\n        </button>\n        {/* ウォレットコネクトのボタンを実装 */}\n        {!currentAccount && (\n        <button className=\"waveButton\" onClick={connectWallet}>\n            Connect Wallet\n        </button>\n        )}\n        {currentAccount && (\n        <button className=\"waveButton\" onClick={connectWallet}>\n            Wallet Connected\n        </button>\n        )}\n      </div>\n    </div>\n  );\n  }\nexport default App\n"]},"metadata":{},"sourceType":"module"}